<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8">
	<title>Web với popup mờ kéo thả</title>
	<style>
		body {
			width: 1920px;
			height: 1080px;
			overflow-x: hidden;
			overflow-y: hidden;
		}
		#bg-video {
			position: fixed;
			top: 0; left: 0;
			width: 100vw; height: 100vh;
			object-fit: cover;
			object-position: center bottom;
			z-index: -1;
		}
		#nut1 {
			position: fixed;
			bottom: 32px;
			right: 32px;
			padding: 16px 32px;
			background: rgba(255,255,255,0.5);
			color: #333;
			border: none;
			border-radius: 12px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			font-size: 18px;
			cursor: pointer;
			z-index: 10;
			backdrop-filter: blur(2px);
			display: flex;
			align-items: center;
			gap: 8px;
			transition: transform 0.18s cubic-bezier(.5,-0.5,.5,1);
		}
		#nut2 {
			position: fixed;
			right: 32px;
			bottom: 32px;
			/* nut2 nằm phía trên nut1, cách nut1 16px */
			transform: translateY(-64px);
			padding: 16px 32px;
			background: rgba(255,255,255,0.5);
			color: #333;
			border: none;
			border-radius: 12px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			font-size: 18px;
			cursor: pointer;
			z-index: 11;
			backdrop-filter: blur(2px);
			display: flex;
			align-items: center;
			gap: 8px;
			transition: transform 0.18s cubic-bezier(.5,-0.5,.5,1);
		}
		#nut1.clicked, #nut2.clicked {
			transform: scale(0.92);
		}
		#nut1 img, #nut2 img {
			width: 40px;
			height: 40px;
			border-radius: 50%;
			background: transparent;
			pointer-events: none;
		}
		#cuaso1 {
			display: none;
			position: fixed;
			top: 120px;
			left: 120px;
			width: 300px;
			height: 400px;
			background: rgba(255,255,255,0.5);
			box-shadow: 0 4px 32px rgba(0,0,0,0.18);
			border-radius: 16px;
			z-index: 99999;
			backdrop-filter: blur(8px);
			overflow: hidden;
		}
		#custom-header {
			cursor: move;
			padding: 12px 16px;
			background: rgba(255,255,255,0.3);
			border-radius: 16px 16px 0 0;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		#custom-title {
			font-size: 20px;
			color: #333;
			text-align: center;
			width: 100%;
		}
		#custom-content {
			padding: 24px;
			color: #333;
			font-size: 24px;
			display: flex;
			flex-direction: column;
			gap: 18px;
			width: 100%;
			box-sizing: border-box;
			overflow: auto;
			max-height: calc(100% - 56px);
			align-items: center;
		}
		.custom-content-line {
			display: flex;
			align-items: center;
			gap: 8px;
			width: 100%;
			min-width: 0;
			justify-content: center;
		}
		.custom-content-line img {
			width: 42px !important;
			height: 42px !important;
			min-width: 42px !important;
			min-height: 42px !important;
			max-width: 42px !important;
			max-height: 42px !important;
			object-fit: cover;
			vertical-align: middle;
		}
		.custom-content-line a, .custom-content-line span {
			font-size: 22px !important;
		}
	</style>
</head>
<body>
	<video id="bg-video" autoplay loop muted playsinline preload="auto">
		<source src="b21.mp4" type="video/mp4">
		Trình duyệt của bạn không hỗ trợ video.
	</video>
	<button id="nut1">
		<img src="dcl.png" alt="Discord">
		Discord
	</button>
	<button id="nut2" style="bottom:80px; right:32px; position:fixed; padding:16px 32px; background:rgba(255,255,255,0.5); color:#333; border:none; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.08); font-size:18px; cursor:pointer; z-index:11; backdrop-filter:blur(2px); display:flex; align-items:center; gap:8px;">
		<img src="yt.png" alt="Youtube" style="width:28px; height:28px; border-radius:50%; background:transparent; pointer-events:none;">
		Youtube
	</button>
	<audio id="btn-audio" src="vlg1.mp3" preload="auto"></audio>
	<div id="cuaso1">
		<div id="custom-header">
			<span id="custom-title">13th / nerr</span>
		</div>
		<div id="custom-content">
			<div style="margin-bottom:12px; display:flex; align-items:center; gap:8px;">
				<img src="av2.png" alt="n13vjr" style="width:22px; height:22px; border-radius:50%;">
				<a href="https://discordapp.com/users/1115398524805324941" target="_blank" style="color:#5865F2; text-decoration:none;">n13vjr</a>
			</div>
			<div style="margin-bottom:12px; display:flex; align-items:center; gap:8px;">
				<img src="av1.gif" alt="n13vjr_" style="width:22px; height:22px; border-radius:50%;">
				<a href="https://discordapp.com/users/982663978125758535" target="_blank" style="color:#5865F2; text-decoration:none;">n13vjr_</a>
			</div>
			<div class="custom-content-line" style="margin-bottom:12px; display:flex; align-items:center; gap:8px;">
				<img src="av3.gif" alt="13th" style="width:22px; height:22px; border-radius:50%;">
				<a href="https://discord.gg/9pPNkKGxsq" target="_blank" style="color:#5865F2; text-decoration:none;">13th</a>
			</div>
		</div>
		<div class="resize-handle" id="custom-resize" style="position:absolute; right:0; bottom:0; width:18px; height:18px; cursor:se-resize; background:rgba(0,0,0,0.08); border-radius:0 0 6px 0; border:1px solid #ccc; z-index:100000;"></div>
	</div>
	<div id="cuaso2" style="display:none; position:fixed; top:180px; left:180px; width:300px; height:400px; background:rgba(255,255,255,0.5); box-shadow:0 4px 32px rgba(0,0,0,0.18); border-radius:16px; z-index:99999; backdrop-filter:blur(8px);">
		<div id="cuaso2-header" style="cursor:move; padding:12px 16px; background:rgba(255,255,255,0.3); border-radius:16px 16px 0 0; display:flex; justify-content:space-between; align-items:center;">
			<span id="cuaso2-title" style="font-size:20px; color:#333;">Cửa sổ 2 mờ 300x400px</span>
		</div>
		<div id="cuaso2-content" style="padding:24px; color:#333; font-size:16px;">Nội dung cửa sổ 2...</div>
		<div class="resize-handle" id="cuaso2-resize" style="position:absolute; right:0; bottom:0; width:18px; height:18px; cursor:se-resize; background:rgba(0,0,0,0.08); border-radius:0 0 6px 0; border:1px solid #ccc; z-index:100000;"></div>
	</div>
	<script>
		// Resize cho customWindow
		const customResize = document.getElementById('custom-resize');
		let isResizingCustom = false;
		customResize.addEventListener('mousedown', function(e) {
			isResizingCustom = true;
			e.preventDefault();
			e.stopPropagation();
		});
		document.addEventListener('mousemove', function(e) {
			if (isResizingCustom) {
				let minW = 200, minH = 120;
				let newW = Math.max(minW, e.clientX - customWindow.offsetLeft);
				let newH = Math.max(minH, e.clientY - customWindow.offsetTop);
				customWindow.style.width = newW + 'px';
				customWindow.style.height = newH + 'px';
			}
		});
		document.addEventListener('mouseup', function() {
			isResizingCustom = false;
		});
		// Resize cho cuaso2
		const cuaso2Resize = document.getElementById('cuaso2-resize');
		let isResizingCuaso2 = false;
		cuaso2Resize.addEventListener('mousedown', function(e) {
			isResizingCuaso2 = true;
			e.preventDefault();
			e.stopPropagation();
		});
		document.addEventListener('mousemove', function(e) {
			if (isResizingCuaso2) {
				let minW = 200, minH = 120;
				let newW = Math.max(minW, e.clientX - cuaso2.offsetLeft);
				let newH = Math.max(minH, e.clientY - cuaso2.offsetTop);
				cuaso2.style.width = newW + 'px';
				cuaso2.style.height = newH + 'px';
			}
		});
		document.addEventListener('mouseup', function() {
			isResizingCuaso2 = false;
		});
			// Nút nut1: hiệu ứng hạt + hiện/tắt popup + ẩn/hiện nut1 img
			const nut1 = document.getElementById('nut1');
			const nut1Img = nut1.querySelector('img');
			const customWindow = document.getElementById('cuaso1');
			let popupVisible = false;
			const nut2 = document.getElementById('nut2');
			const cuaso2 = document.getElementById('cuaso2');
			let cuaso2Visible = false;
			nut1.addEventListener('click', function(e) {
				// Hiệu ứng nhấp nút
				nut1.classList.add('clicked');
				setTimeout(() => nut1.classList.remove('clicked'), 180);
				// Phát âm thanh
				var audio = document.getElementById('btn-audio');
				audio.currentTime = 0;
				audio.play();
				// Hiệu ứng hạt
				const btn = e.currentTarget;
				const rect = btn.getBoundingClientRect();
				const centerX = rect.left + rect.width / 2;
				const centerY = rect.top + rect.height / 2;
				for (let i = 0; i < 20; i++) {
					const angle = Math.random() * 2 * Math.PI;
					const speed = 220 + Math.random() * 180;
					const dx = Math.cos(angle) * speed + (Math.random() - 0.5) * 80;
					const dy = Math.sin(angle) * speed - (160 + Math.random() * 160);
					const particle = document.createElement('img');
					particle.src = 'vdmg.png';
					particle.style.position = 'fixed';
					particle.style.left = centerX + 'px';
					particle.style.top = centerY + 'px';
					particle.style.width = '32px';
					particle.style.height = '32px';
					particle.style.pointerEvents = 'none';
					particle.style.zIndex = 99999;
					particle.style.transition = 'transform 1.2s cubic-bezier(.5,-0.5,.5,1), opacity 1.2s linear';
					document.body.appendChild(particle);
					setTimeout(() => {
						particle.style.transform = `translate(${dx}px, ${dy}px) scale(0.7)`;
						particle.style.opacity = '0';
					}, 10);
					setTimeout(() => {
						particle.remove();
					}, 1300);
				}
				// Toggle popup
				popupVisible = !popupVisible;
				customWindow.style.display = popupVisible ? 'block' : 'none';
			});
			nut2.addEventListener('click', function(e) {
				nut2.classList.add('clicked');
				setTimeout(() => nut2.classList.remove('clicked'), 180);
				var audio = document.getElementById('btn-audio');
				audio.currentTime = 0;
				audio.play();
				cuaso2Visible = !cuaso2Visible;
				cuaso2.style.display = cuaso2Visible ? 'block' : 'none';
			});
			// Kéo di chuyển cửa sổ custom
			const customHeader = document.getElementById('custom-header');
			let isDraggingCustom = false, offsetXCustom = 0, offsetYCustom = 0;
			customHeader.addEventListener('mousedown', function(e) {
				isDraggingCustom = true;
				offsetXCustom = e.clientX - customWindow.offsetLeft;
				offsetYCustom = e.clientY - customWindow.offsetTop;
				customHeader.style.cursor = 'grabbing';
			});
			document.addEventListener('mousemove', function(e) {
				if (isDraggingCustom) {
					customWindow.style.left = (e.clientX - offsetXCustom) + 'px';
					customWindow.style.top = (e.clientY - offsetYCustom) + 'px';
				}
			});
			document.addEventListener('mouseup', function() {
				isDraggingCustom = false;
				customHeader.style.cursor = 'move';
			});
			// Kéo di chuyển cửa sổ cuaso2
			const cuaso2Header = document.getElementById('cuaso2-header');
			let isDraggingCuaso2 = false, offsetXCuaso2 = 0, offsetYCuaso2 = 0;
			cuaso2Header.addEventListener('mousedown', function(e) {
				isDraggingCuaso2 = true;
				offsetXCuaso2 = e.clientX - cuaso2.offsetLeft;
				offsetYCuaso2 = e.clientY - cuaso2.offsetTop;
				cuaso2Header.style.cursor = 'grabbing';
			});
			document.addEventListener('mousemove', function(e) {
				if (isDraggingCuaso2) {
					cuaso2.style.left = (e.clientX - offsetXCuaso2) + 'px';
					cuaso2.style.top = (e.clientY - offsetYCuaso2) + 'px';
				}
			});
			document.addEventListener('mouseup', function() {
				isDraggingCuaso2 = false;
				cuaso2Header.style.cursor = 'move';
			});
			// Thêm hỗ trợ kéo cửa sổ bằng cảm ứng (touch) cho customWindow
			customHeader.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingCustom = true;
        offsetXCustom = e.touches[0].clientX - customWindow.offsetLeft;
        offsetYCustom = e.touches[0].clientY - customWindow.offsetTop;
        customHeader.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingCustom && e.touches.length === 1) {
        customWindow.style.left = (e.touches[0].clientX - offsetXCustom) + 'px';
        customWindow.style.top = (e.touches[0].clientY - offsetYCustom) + 'px';
    }
});
document.addEventListener('touchend', function() {
    isDraggingCustom = false;
    customHeader.style.cursor = 'move';
});
// Thêm hỗ trợ kéo cửa sổ bằng cảm ứng (touch) cho cuaso2
cuaso2Header.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingCuaso2 = true;
        offsetXCuaso2 = e.touches[0].clientX - cuaso2.offsetLeft;
        offsetYCuaso2 = e.touches[0].clientY - cuaso2.offsetTop;
        cuaso2Header.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingCuaso2 && e.touches.length === 1) {
        cuaso2.style.left = (e.touches[0].clientX - offsetXCuaso2) + 'px';
        cuaso2.style.top = (e.touches[0].clientY - offsetYCuaso2) + 'px';
    }
});
document.addEventListener('touchend', function() {
    isDraggingCuaso2 = false;
    cuaso2Header.style.cursor = 'move';
});
	</script>
</body>
</html>
