<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/jpg" href="pic/img2.jpg">
    <title>Er Nerr</title>
	<style>
		body {
			width: 1920px;
			height: 1080px;
			overflow-x: hidden;
			overflow-y: hidden;
		}
		#bg-video {
			position: fixed;
			top: 0; left: 0;
			width: 100vw; height: 100vh;
			object-fit: cover;
			object-position: center bottom;
			z-index: -1;
		}
		/* Gộp và rút gọn CSS cho các nút */
#nut1, #nut2, #nut3 {
    position: absolute;
    right: unset;
    bottom: unset;
    left: 32px;
    top: 32px;
    /* Các nút sẽ bắt đầu ở vị trí khác nhau */
}
#nut2 { left: 32px; top: 112px; }
#nut3 { left: 32px; top: 192px; }
#nut1, #nut2, #nut3 {
    position: absolute;
    right: unset;
    bottom: unset;
    left: 32px;
    width: 180px;
    height: 64px;
    padding: 0 32px;
    background: rgba(255,255,255,0.6);
    color: #222;
    border: none;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
    font-size: 18px;
    cursor: pointer;
    backdrop-filter: blur(2px);
    display: flex;
    align-items: center;
    gap: 12px;
    user-select: none;
    z-index: 1000000;
    transition: box-shadow 0.2s, transform 0.15s;
}

#nut1:active, #nut2:active, #nut3:active {
    box-shadow: 0 1px 4px rgba(0,0,0,0.18);
    transform: scale(0.96);
    background: rgba(255,255,255,0.8);
}
#nut1 { top: 32px; }
#nut2 { top: 112px; }
#nut3 { top: 192px; }
#nut1 img, #nut2 img, #nut3 img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: transparent;
    pointer-events: none;
}
		/* Rút gọn CSS cho popup */
.popup {
    display: none;
    position: fixed;
    width: 300px;
    height: 400px;
    background: rgba(255,255,255,0.5);
    box-shadow: 0 4px 32px rgba(0,0,0,0.18);
    border-radius: 16px;
    z-index: 99999;
    backdrop-filter: blur(8px);
    overflow: hidden;
}
.popup-header {
    cursor: move;
    padding: 12px 16px;
    background: rgba(255,255,255,0.3);
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
    /* Căn giữa tiêu đề popup */
    .popup-title {
        font-size: 20px;
        color: #333;
        width: 100%;
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
    }
.popup-content {
    width: 100%;
    box-sizing: border-box;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: calc(100% - 56px);
    display: block;
    text-align: center;
}
	</style>
</head>
<body>
	<video id="bg-video" autoplay loop muted playsinline preload="auto">
		<source src="video/b21.mp4" type="video/mp4">
		Trình duyệt của bạn không hỗ trợ video.
	</video>
	<!-- Nút -->
<button id="nut1">
		<img src="pic/dcl.png" alt="Discord">
		Discord
	</button>
	<button id="nut2">
		<img src="pic/yt.png" alt="Youtube" style="width:28px; height:28px; border-radius:50%; background:transparent; pointer-events:none;">
		Youtube
	</button>
	<button id="nut3">
		<img src="pic/Roblox.png" alt="Roblox" style="width:28px; height:28px; border-radius:50%; background:transparent; pointer-events:none;">
		Roblox
	</button>
	<!-- Popup -->
	<div id="cuaso1" class="popup" style="top:120px; left:120px;">
    <div id="custom-header" class="popup-header">
        <span id="custom-title" class="popup-title">13th / nerr</span>
        <div style="display:flex; gap:4px;">
            <button id="custom-min" title="Thu nhỏ" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">–</button>
            <button id="custom-max" title="Mở rộng" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">□</button>
        </div>
    </div>
    <div id="custom-content" class="popup-content">
        <a href="https://discordapp.com/users/1115398524805324941" target="_blank" style="color:#5865F2; text-decoration:none; display:flex; align-items:center; gap:8px; margin-bottom:12px;">
            <img src="pic/av2.png" alt="n13vjr" style="width:42px; height:42px; border-radius:50%; object-fit:cover; vertical-align:middle;">
            n13vjr
        </a>
        <a href="https://discordapp.com/users/982663978125758535" target="_blank" style="color:#5865F2; text-decoration:none; display:flex; align-items:center; gap:8px; margin-bottom:12px;">
            <img src="pic/av1.gif" alt="n13vjr_" style="width:42px; height:42px; border-radius:50%; object-fit:cover; vertical-align:middle;">
            n13vjr_
        </a>
        <a href="https://discord.gg/9pPNkKGxsq" target="_blank" style="color:#5865F2; text-decoration:none; display:flex; align-items:center; gap:8px; margin-bottom:12px;">
            <img src="pic/av3.gif" alt="13th" style="width:42px; height:42px; border-radius:50%; object-fit:cover; vertical-align:middle;">
            13th
        </a>
    </div>
    <!-- Xóa handle cũ, đã có handle mới tự động tạo -->
</div>
<div id="cuaso2" class="popup" style="top:180px; left:180px;">
    <div id="cuaso2-header" class="popup-header">
        <span id="cuaso2-title" class="popup-title">Cửa sổ 2 mờ 300x400px</span>
        <div style="display:flex; gap:4px;">
            <button id="cuaso2-min" title="Thu nhỏ" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">–</button>
            <button id="cuaso2-max" title="Mở rộng" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">□</button>
        </div>
    </div>
    <div id="cuaso2-content" class="popup-content">Nội dung cửa sổ 2...</div>
    <!-- Xóa handle cũ, đã có handle mới tự động tạo -->
</div>
<div id="cuaso3" class="popup" style="top:240px; left:240px;">
    <div id="cuaso3-header" class="popup-header">
        <span id="cuaso3-title" class="popup-title">My Roblox Accounts(21)</span>
        <div style="display:flex; gap:4px;">
            <button id="cuaso3-min" title="Thu nhỏ" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">–</button>
            <button id="cuaso3-max" title="Mở rộng" style="width:28px; height:28px; border:none; background:#eee; border-radius:6px; cursor:pointer; font-size:16px;">□</button>
        </div>
    </div>
    <div id="cuaso3-content" class="popup-content">
            <div><a href="https://www.roblox.com/users/3518420197/profile" target="_blank"><img src="pic/n13vjr.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 1:</b> n13vjr</div>
            <div><a href="https://www.roblox.com/users/4474878300/profile" target="_blank"><img src="pic/nerrnofriends.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 2:</b> nerrnofriends</div>
            <div><a href="https://www.roblox.com/users/7544319820/profile" target="_blank"><img src="pic/nerr239.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 3:</b> nerr239</div>
            <div><a href="https://www.roblox.com/users/7808611657/profile" target="_blank"><img src="pic/mynameisnerr.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 4:</b> mynameisnerr</div>
            <div><a href="https://www.roblox.com/users/7855889551/profile" target="_blank"><img src="pic/uhnerr.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 5:</b> sonerr</div>
            <div><a href="https://www.roblox.com/users/651536/profile" target="_blank"><img src="pic/robert488.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 6:</b> robert488</div>
            <div><a href="https://www.roblox.com/users/1626232/profile" target="_blank"><img src="pic/dip514.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 7:</b> dip514</div>
            <div><a href="https://www.roblox.com/users/1388501/profile" target="_blank"><img src="pic/Thedarkgunz.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 8:</b> TheDarkGunz</div>
            <div><a href="https://www.roblox.com/users/7682880452/profile" target="_blank"><img src="pic/n13vjr1.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 9:</b> n13vjr_1</div>
            <div><a href="https://www.roblox.com/users/7682888324/profile" target="_blank"><img src="pic/n13vjr2.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 10:</b> n13vjr_2</div>
            <div><a href="https://www.roblox.com/users/7682893720/profile" target="_blank"><img src="pic/n13vjr3.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 11:</b> n13vjr_3</div>
            <div><a href="https://www.roblox.com/users/7682898185/profile" target="_blank"><img src="pic/n13vjr4.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 12:</b> n13vjr_4</div>
            <div><a href="https://www.roblox.com/users/7682901117/profile" target="_blank"><img src="pic/n13vjr5.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 13:</b> n13vjr_5</div>
            <div><a href="https://www.roblox.com/users/7682901785/profile" target="_blank"><img src="pic/n13vjr6.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 14:</b> n13vjr_6</div>
            <div><a href="https://www.roblox.com/users/7682911530/profile" target="_blank"><img src="pic/n13vjr7.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 15:</b> n13vjr_7</div>
            <div><a href="https://www.roblox.com/users/7682909716/profile" target="_blank"><img src="pic/n13vjr8.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 16:</b> n13vjr_8</div>
            <div><a href="https://www.roblox.com/users/7682914046/profile" target="_blank"><img src="pic/n13vjr9.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 17:</b> n13vjr_9</div>
            <div><a href="https://www.roblox.com/users/7682909940/profile" target="_blank"><img src="pic/n13vjr10.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 18:</b> n13vjr_10</div>
            <div><a href="https://www.roblox.com/users/7682914236/profile" target="_blank"><img src="pic/n13vjr11.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 19:</b> n13vjr_11</div>
            <div><a href="https://www.roblox.com/users/7682913450/profile" target="_blank"><img src="pic/n13vjr12.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 20:</b> n13vjr_12</div>
            <div><a href="https://www.roblox.com/users/7682922659/profile" target="_blank"><img src="pic/n13vjr13.png" alt="avatar" style="width:32px; height:32px; border-radius:50%; margin-right:8px; vertical-align:middle;"></a> <b>Roblox Account 21:</b> n13vjr_13</div>
        </div>
    </div>
    <!-- Xóa handle cũ, đã có handle mới tự động tạo -->
</div>
	<script>
    // Khởi tạo các biến popup trước khi dùng
    const customWindow = document.getElementById('cuaso1');
    const cuaso2 = document.getElementById('cuaso2');
    const cuaso3 = document.getElementById('cuaso3');

    // Resize mới cho popup khi kéo từ cạnh hoặc góc
    function makeResizable(popup) {
            let isResizing = false;
            let startX, startY, startW, startH, dir;
            // Tạo 8 handle cho 4 cạnh và 4 góc
            const handles = [
                {dir:'n', style:'top:-6px;left:50%;transform:translateX(-50%);cursor:n-resize;'},
                {dir:'s', style:'bottom:-6px;left:50%;transform:translateX(-50%);cursor:s-resize;'},
                {dir:'e', style:'right:-6px;top:50%;transform:translateY(-50%);cursor:e-resize;'},
                {dir:'w', style:'left:-6px;top:50%;transform:translateY(-50%);cursor:w-resize;'},
                {dir:'ne', style:'top:-6px;right:-6px;cursor:ne-resize;'},
                {dir:'nw', style:'top:-6px;left:-6px;cursor:nw-resize;'},
                {dir:'se', style:'bottom:-6px;right:-6px;cursor:se-resize;'},
                {dir:'sw', style:'bottom:-6px;left:-6px;cursor:sw-resize;'}
            ];
            handles.forEach(h => {
                const handle = document.createElement('div');
                handle.className = 'resize-handle';
                handle.setAttribute('data-dir', h.dir);
                // Nếu là góc thì phát sáng mạnh hơn
                let isCorner = ['nw','ne','sw','se'].includes(h.dir);
                handle.style.cssText =
                    'position:absolute;width:14px;height:14px;'
                    + 'background:rgba(255,255,255,0.18);'
                    + 'border-radius:50%;'
                    + 'z-index:100001;'
                    + (isCorner
                        ? 'box-shadow:0 0 12px 3px #7ed6fa,0 0 24px 8px #fff8;'
                        : 'box-shadow:0 0 8px 2px #fff8;')
                    + 'border:1.5px solid #7ed6fa;'
                    + 'transition:opacity 0.2s, box-shadow 0.2s;'
                    + h.style;
                handle.style.opacity = '0.7';
                popup.appendChild(handle);
                // Mouse
                handle.addEventListener('mousedown', function(e) {
                    isResizing = true;
                    dir = h.dir;
                    startX = e.clientX;
                    startY = e.clientY;
                    startW = popup.offsetWidth;
                    startH = popup.offsetHeight;
                    // Nếu là góc trái hoặc phải, lưu vị trí popup
                    if (dir === 'nw' || dir === 'sw') popup._startLeft = popup.offsetLeft;
                    if (dir === 'ne' || dir === 'se') popup._startLeft = popup.offsetLeft;
                    if (dir === 'nw' || dir === 'ne') popup._startTop = popup.offsetTop;
                    if (dir === 'sw' || dir === 'se') popup._startTop = popup.offsetTop;
                    // Làm mờ các handle khi kéo
                    Array.from(popup.querySelectorAll('.resize-handle')).forEach(hd => { hd.style.opacity = '0.2'; });
                    e.preventDefault();
                    e.stopPropagation();
                });
                // Touch
                handle.addEventListener('touchstart', function(e) {
                    if (e.touches.length === 1) {
                        isResizing = true;
                        dir = h.dir;
                        startX = e.touches[0].clientX;
                        startY = e.touches[0].clientY;
                        startW = popup.offsetWidth;
                        startH = popup.offsetHeight;
                        if (dir === 'nw' || dir === 'sw') popup._startLeft = popup.offsetLeft;
                        if (dir === 'ne' || dir === 'se') popup._startLeft = popup.offsetLeft;
                        if (dir === 'nw' || dir === 'ne') popup._startTop = popup.offsetTop;
                        if (dir === 'sw' || dir === 'se') popup._startTop = popup.offsetTop;
                        Array.from(popup.querySelectorAll('.resize-handle')).forEach(hd => { hd.style.opacity = '0.2'; });
                        e.preventDefault();
                        e.stopPropagation();
                    }
                });
            });
            // Mouse move
            document.addEventListener('mousemove', function(e) {
                if (!isResizing) return;
                let dx = e.clientX - startX;
                let dy = e.clientY - startY;
                resizeByDir(popup, dir, dx, dy, startW, startH);
            });
            document.addEventListener('mouseup', function() {
                isResizing = false;
                // Hiện lại các handle
                [customWindow, cuaso2, cuaso3].forEach(p => {
                    if (p) Array.from(p.querySelectorAll('.resize-handle')).forEach(hd => { hd.style.opacity = '1'; });
                });
            });
            // Touch move
            document.addEventListener('touchmove', function(e) {
                if (!isResizing || e.touches.length !== 1) return;
                let dx = e.touches[0].clientX - startX;
                let dy = e.touches[0].clientY - startY;
                resizeByDir(popup, dir, dx, dy, startW, startH);
            });
            document.addEventListener('touchend', function() {
                isResizing = false;
                [customWindow, cuaso2, cuaso3].forEach(p => {
                    if (p) Array.from(p.querySelectorAll('.resize-handle')).forEach(hd => { hd.style.opacity = '1'; });
                });
            });
        }
        function resizeByDir(popup, dir, dx, dy, startW, startH) {
            let minW = 200, minH = 120;
            let w = startW, h = startH;
            let left = popup.offsetLeft, top = popup.offsetTop;
            // Sửa logic cho các góc để không bị ngược
                if (dir === 'nw') {
                    w = Math.max(minW, startW - dx);
                    h = Math.max(minH, startH - dy);
                    left = popup._startLeft + dx;
                    top = popup._startTop + dy;
                } else if (dir === 'ne') {
                    w = Math.max(minW, startW + dx);
                    h = Math.max(minH, startH - dy);
                    top = popup._startTop + dy;
                } else if (dir === 'sw') {
                    w = Math.max(minW, startW - dx);
                    h = Math.max(minH, startH + dy);
                    left = popup._startLeft + dx;
                } else if (dir === 'se') {
                    w = Math.max(minW, startW + dx);
                    h = Math.max(minH, startH + dy);
                } else {
                    if (dir === 'n') {
                        h = Math.max(minH, startH - dy);
                        top = popup._startTop + dy;
                    } else if (dir === 's') {
                        h = Math.max(minH, startH + dy);
                    } else if (dir === 'e') {
                        w = Math.max(minW, startW + dx);
                    } else if (dir === 'w') {
                        w = Math.max(minW, startW - dx);
                        left = popup._startLeft + dx;
                    }
                }
                popup.style.width = w + 'px';
                popup.style.height = h + 'px';
                if (dir.includes('w')) popup.style.left = left + 'px';
                if (dir.includes('n')) popup.style.top = top + 'px';
        }
    // Gắn resize cho các popup
    makeResizable(customWindow);
    makeResizable(cuaso2);
    makeResizable(cuaso3);
			// Nút nut1: hiệu ứng hạt + hiện/tắt popup + ẩn/hiện nut1 img
            const nut1 = document.getElementById('nut1');
            const nut1Img = nut1.querySelector('img');
            let popupVisible = false;
            const nut2 = document.getElementById('nut2');
            let cuaso2Visible = false;
            const nut3 = document.getElementById('nut3');
            let cuaso3Visible = false;
            // Chỉ mở popup khi click thực sự, không phải khi kéo/thả
            function isClickEvent(e, btn) {
                // Nếu là chuột trái và không phải kéo
                return e.type === 'click' && !btn._dragging;
            }

            nut1._dragging = false;
            nut1.addEventListener('mousedown', function(e) { nut1._dragging = false; });
            nut1.addEventListener('mousemove', function(e) { nut1._dragging = true; });
            nut1.addEventListener('click', function(e) {
                if (isClickEvent(e, nut1)) {
                    popupVisible = !popupVisible;
                    zoomPopup(customWindow, popupVisible);
                    if (popupVisible) autoFitPopup(customWindow);
                }
                nut1._dragging = false;
            });

            nut2._dragging = false;
            nut2.addEventListener('mousedown', function(e) { nut2._dragging = false; });
            nut2.addEventListener('mousemove', function(e) { nut2._dragging = true; });
            nut2.addEventListener('click', function(e) {
                if (isClickEvent(e, nut2)) {
                    cuaso2Visible = !cuaso2Visible;
                    zoomPopup(cuaso2, cuaso2Visible);
                    if (cuaso2Visible) autoFitPopup(cuaso2);
                }
                nut2._dragging = false;
            });

            nut3._dragging = false;
            nut3.addEventListener('mousedown', function(e) { nut3._dragging = false; });
            nut3.addEventListener('mousemove', function(e) { nut3._dragging = true; });
            nut3.addEventListener('click', function(e) {
                if (isClickEvent(e, nut3)) {
                    cuaso3Visible = !cuaso3Visible;
                    zoomPopup(cuaso3, cuaso3Visible);
                    if (cuaso3Visible) autoFitPopup(cuaso3);
                }
                nut3._dragging = false;
            });
			// Kéo di chuyển cửa sổ custom
			const customHeader = document.getElementById('custom-header');
			let isDraggingCustom = false, offsetXCustom = 0, offsetYCustom = 0;
			customHeader.addEventListener('mousedown', function(e) {
				isDraggingCustom = true;
				offsetXCustom = e.clientX - customWindow.offsetLeft;
				offsetYCustom = e.clientY - customWindow.offsetTop;
				customHeader.style.cursor = 'grabbing';
			});
			document.addEventListener('mousemove', function(e) {
				if (isDraggingCustom) {
					customWindow.style.left = (e.clientX - offsetXCustom) + 'px';
					customWindow.style.top = (e.clientY - offsetYCustom) + 'px';
				}
			});
			document.addEventListener('mouseup', function() {
				isDraggingCustom = false;
				customHeader.style.cursor = 'move';
			});
			// Kéo di chuyển cửa sổ cuaso2
			const cuaso2Header = document.getElementById('cuaso2-header');
			let isDraggingCuaso2 = false, offsetXCuaso2 = 0, offsetYCuaso2 = 0;
			cuaso2Header.addEventListener('mousedown', function(e) {
				isDraggingCuaso2 = true;
				offsetXCuaso2 = e.clientX - cuaso2.offsetLeft;
				offsetYCuaso2 = e.clientY - cuaso2.offsetTop;
				cuaso2Header.style.cursor = 'grabbing';
			});
			document.addEventListener('mousemove', function(e) {
				if (isDraggingCuaso2) {
					cuaso2.style.left = (e.clientX - offsetXCuaso2) + 'px';
					cuaso2.style.top = (e.clientY - offsetYCuaso2) + 'px';
				}
			});
			document.addEventListener('mouseup', function() {
				isDraggingCuaso2 = false;
				cuaso2Header.style.cursor = 'move';
			});
			// Kéo di chuyển cửa sổ cuaso3
			const cuaso3Header = document.getElementById('cuaso3-header');
			let isDraggingCuaso3 = false, offsetXCuaso3 = 0, offsetYCuaso3 = 0;
			cuaso3Header.addEventListener('mousedown', function(e) {
				isDraggingCuaso3 = true;
				offsetXCuaso3 = e.clientX - cuaso3.offsetLeft;
				offsetYCuaso3 = e.clientY - cuaso3.offsetTop;
				cuaso3Header.style.cursor = 'grabbing';
			});
			document.addEventListener('mousemove', function(e) {
				if (isDraggingCuaso3) {
					cuaso3.style.left = (e.clientX - offsetXCuaso3) + 'px';
					cuaso3.style.top = (e.clientY - offsetYCuaso3) + 'px';
				}
			});
			document.addEventListener('mouseup', function() {
				isDraggingCuaso3 = false;
				cuaso3Header.style.cursor = 'move';
			});
			// Thêm hỗ trợ kéo cửa sổ bằng cảm ứng (touch) cho customWindow
			customHeader.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingCustom = true;
        offsetXCustom = e.touches[0].clientX - customWindow.offsetLeft;
        offsetYCustom = e.touches[0].clientY - customWindow.offsetTop;
        customHeader.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingCustom && e.touches.length === 1) {
        customWindow.style.left = (e.touches[0].clientX - offsetXCustom) + 'px';
        customWindow.style.top = (e.touches[0].clientY - offsetYCustom) + 'px';
    }
});
document.addEventListener('touchend', function() {
    isDraggingCustom = false;
    customHeader.style.cursor = 'move';
});
// Thêm hỗ trợ kéo cửa sổ bằng cảm ứng (touch) cho cuaso2
cuaso2Header.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingCuaso2 = true;
        offsetXCuaso2 = e.touches[0].clientX - cuaso2.offsetLeft;
        offsetYCuaso2 = e.touches[0].clientY - cuaso2.offsetTop;
        cuaso2Header.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingCuaso2 && e.touches.length === 1) {
        cuaso2.style.left = (e.touches[0].clientX - offsetXCuaso2) + 'px';
        cuaso2.style.top = (e.touches[0].clientY - offsetYCuaso2) + 'px';
    }
});
document.addEventListener('touchend', function() {
    isDraggingCuaso2 = false;
    cuaso2Header.style.cursor = 'move';
});
// Thêm hỗ trợ kéo cửa sổ bằng cảm ứng (touch) cho cuaso3
cuaso3Header.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingCuaso3 = true;
        offsetXCuaso3 = e.touches[0].clientX - cuaso3.offsetLeft;
        offsetYCuaso3 = e.touches[0].clientY - cuaso3.offsetTop;
        cuaso3Header.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingCuaso3 && e.touches.length === 1) {
        cuaso3.style.left = (e.touches[0].clientX - offsetXCuaso3) + 'px';
        cuaso3.style.top = (e.touches[0].clientY - offsetYCuaso3) + 'px';
    }
});
document.addEventListener('touchend', function() {
    isDraggingCuaso3 = false;
    cuaso3Header.style.cursor = 'move';
});
		// Kéo di chuyển nút nut1
let isDraggingNut1 = false, offsetXNut1 = 0, offsetYNut1 = 0;
nut1.addEventListener('mousedown', function(e) {
    isDraggingNut1 = true;
    offsetXNut1 = e.clientX - nut1.offsetLeft;
    offsetYNut1 = e.clientY - nut1.offsetTop;
    nut1.style.cursor = 'grabbing';
});
document.addEventListener('mousemove', function(e) {
    if (isDraggingNut1) {
        nut1.style.left = (e.clientX - offsetXNut1) + 'px';
        nut1.style.top = (e.clientY - offsetYNut1) + 'px';
        nut1.style.right = '';
        nut1.style.bottom = '';
        nut1.style.position = 'fixed';
    }
});
document.addEventListener('mouseup', function() {
    isDraggingNut1 = false;
    nut1.style.cursor = 'pointer';
});
// Kéo di chuyển nút nut2
let isDraggingNut2 = false, offsetXNut2 = 0, offsetYNut2 = 0;
nut2.addEventListener('mousedown', function(e) {
    isDraggingNut2 = true;
    offsetXNut2 = e.clientX - nut2.offsetLeft;
    offsetYNut2 = e.clientY - nut2.offsetTop;
    nut2.style.cursor = 'grabbing';
});
document.addEventListener('mousemove', function(e) {
    if (isDraggingNut2) {
        nut2.style.left = (e.clientX - offsetXNut2) + 'px';
        nut2.style.top = (e.clientY - offsetYNut2) + 'px';
        nut2.style.right = '';
        nut2.style.bottom = '';
        nut2.style.position = 'fixed';
        nut2.style.transform = '';
    }
});
document.addEventListener('mouseup', function() {
    isDraggingNut2 = false;
    nut2.style.cursor = 'pointer';
});
// Kéo di chuyển nút nut3
let isDraggingNut3 = false, offsetXNut3 = 0, offsetYNut3 = 0;
nut3.addEventListener('mousedown', function(e) {
    isDraggingNut3 = true;
    offsetXNut3 = e.clientX - nut3.offsetLeft;
    offsetYNut3 = e.clientY - nut3.offsetTop;
    nut3.style.cursor = 'grabbing';
});
document.addEventListener('mousemove', function(e) {
    if (isDraggingNut3) {
        nut3.style.left = (e.clientX - offsetXNut3) + 'px';
        nut3.style.top = (e.clientY - offsetYNut3) + 'px';
        nut3.style.right = '';
        nut3.style.bottom = '';
        nut3.style.position = 'fixed';
    }
});
document.addEventListener('mouseup', function() {
    isDraggingNut3 = false;
    nut3.style.cursor = 'pointer';
});
// Hỗ trợ kéo bằng cảm ứng cho nut1
nut1.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingNut1 = true;
        offsetXNut1 = e.touches[0].clientX - nut1.offsetLeft;
        offsetYNut1 = e.touches[0].clientY - nut1.offsetTop;
        nut1.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingNut1 && e.touches.length === 1) {
        nut1.style.left = (e.touches[0].clientX - offsetXNut1) + 'px';
        nut1.style.top = (e.touches[0].clientY - offsetYNut1) + 'px';
        nut1.style.right = '';
        nut1.style.bottom = '';
        nut1.style.position = 'fixed';
    }
});
document.addEventListener('touchend', function() {
    isDraggingNut1 = false;
    nut1.style.cursor = 'pointer';
});
// Hỗ trợ kéo bằng cảm ứng cho nut2
nut2.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingNut2 = true;
        offsetXNut2 = e.touches[0].clientX - nut2.offsetLeft;
        offsetYNut2 = e.touches[0].clientY - nut2.offsetTop;
        nut2.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingNut2 && e.touches.length === 1) {
        nut2.style.left = (e.touches[0].clientX - offsetXNut2) + 'px';
        nut2.style.top = (e.touches[0].clientY - offsetYNut2) + 'px';
        nut2.style.right = '';
        nut2.style.bottom = '';
        nut2.style.position = 'fixed';
        nut2.style.transform = '';
    }
});
document.addEventListener('touchend', function() {
    isDraggingNut2 = false;
    nut2.style.cursor = 'pointer';
});
// Hỗ trợ kéo bằng cảm ứng cho nut3
nut3.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {
        isDraggingNut3 = true;
        offsetXNut3 = e.touches[0].clientX - nut3.offsetLeft;
        offsetYNut3 = e.touches[0].clientY - nut3.offsetTop;
        nut3.style.cursor = 'grabbing';
    }
});
document.addEventListener('touchmove', function(e) {
    if (isDraggingNut3 && e.touches.length === 1) {
        nut3.style.left = (e.touches[0].clientX - offsetXNut3) + 'px';
        nut3.style.top = (e.touches[0].clientY - offsetYNut3) + 'px';
        nut3.style.right = '';
        nut3.style.bottom = '';
        nut3.style.position = 'fixed';
    }
});
document.addEventListener('touchend', function() {
    isDraggingNut3 = false;
    nut3.style.cursor = 'pointer';
});
// Rút gọn JS cho nút
function togglePopup(btn, popup, visibleVar) {
    window[visibleVar] = !window[visibleVar];
    popup.style.display = window[visibleVar] ? 'block' : 'none';
}

// Nút thu nhỏ/mở rộng cho customWindow
function animateButton(btn, callback) {
    btn.style.transition = 'box-shadow 0.2s, transform 0.15s, background 0.15s';
    btn.style.boxShadow = '0 1px 8px rgba(0,0,0,0.22)';
    btn.style.transform = 'scale(0.96)';
    btn.style.background = '#e0e0e0';
    setTimeout(function() {
        btn.style.boxShadow = '';
        btn.style.transform = '';
        btn.style.background = '';
        if (callback) callback();
    }, 160);
}
document.getElementById('custom-min').onclick = function() {
    animateButton(this, function() {
        var content = customWindow.querySelector('.popup-content');
        if (!content || !content.innerHTML.trim()) {
            zoomPopup(customWindow, false);
            popupVisible = false;
            return;
        }
        customWindow.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        customWindow.style.transform = 'scale(0.7)';
        setTimeout(function() {
            customWindow.style.width = '300px';
            customWindow.style.height = '400px';
            customWindow.style.transform = 'scale(1)';
        }, 180);
    });
};
document.getElementById('custom-max').onclick = function() {
    animateButton(this, function() {
        customWindow.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        customWindow.style.transform = 'scale(1.08)';
        setTimeout(function() {
            autoFitPopup(customWindow);
            customWindow.style.transform = 'scale(1)';
        }, 180);
    });
};
document.getElementById('cuaso2-min').onclick = function() {
    animateButton(this, function() {
        var content = cuaso2.querySelector('.popup-content');
        if (!content || !content.innerHTML.trim()) {
            zoomPopup(cuaso2, false);
            cuaso2Visible = false;
            return;
        }
        cuaso2.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        cuaso2.style.transform = 'scale(0.7)';
        setTimeout(function() {
            cuaso2.style.width = '300px';
            cuaso2.style.height = '400px';
            cuaso2.style.transform = 'scale(1)';
        }, 180);
    });
};
document.getElementById('cuaso2-max').onclick = function() {
    animateButton(this, function() {
        cuaso2.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        cuaso2.style.transform = 'scale(1.08)';
        setTimeout(function() {
            autoFitPopup(cuaso2);
            cuaso2.style.transform = 'scale(1)';
        }, 180);
    });
};
document.getElementById('cuaso3-min').onclick = function() {
    animateButton(this, function() {
        var content = cuaso3.querySelector('.popup-content');
        if (!content || !content.innerHTML.trim()) {
            zoomPopup(cuaso3, false);
            cuaso3Visible = false;
            return;
        }
        cuaso3.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        cuaso3.style.transform = 'scale(0.7)';
        setTimeout(function() {
            cuaso3.style.width = '300px';
            cuaso3.style.height = '400px';
            cuaso3.style.transform = 'scale(1)';
        }, 180);
    });
};
document.getElementById('cuaso3-max').onclick = function() {
    animateButton(this, function() {
        cuaso3.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1)';
        cuaso3.style.transform = 'scale(1.08)';
        setTimeout(function() {
            autoFitPopup(cuaso3);
            cuaso3.style.transform = 'scale(1)';
        }, 180);
    });
};
// Đã xử lý ở trên: popup chỉ mở khi click thực sự, không phải khi kéo/thả nút

// Tự động căn chỉnh popup để hiển thị đầy đủ thông tin
function autoFitPopup(popup) {
    // Lấy phần nội dung
    var content = popup.querySelector('.popup-content');
    if (!content) return;
    // Đặt lại width/height về auto để đo
    popup.style.width = '';
    popup.style.height = '';
    // Đo kích thước nội dung
    var rect = content.getBoundingClientRect();
    var header = popup.querySelector('.popup-header');
    var headerH = header ? header.offsetHeight : 0;
    var minW = 300, minH = 120;
    var padW = 32, padH = 32;
    var newW = Math.max(minW, rect.width + padW);
    var newH = Math.max(minH, rect.height + headerH + padH);
    popup.style.width = newW + 'px';
    popup.style.height = newH + 'px';
}

// Hiệu ứng thu phóng khi đóng/mở popup
function zoomPopup(popup, show, callback) {
    popup.style.transition = 'transform 0.22s cubic-bezier(.4,2,.3,1), opacity 0.18s';
    if (show) {
        popup.style.display = 'block';
        popup.style.opacity = '0';
        popup.style.transform = 'scale(0.7)';
        setTimeout(function() {
            popup.style.opacity = '1';
            popup.style.transform = 'scale(1)';
            if (callback) callback();
        }, 10);
    } else {
        popup.style.opacity = '0';
        popup.style.transform = 'scale(0.7)';
        setTimeout(function() {
            popup.style.display = 'none';
            popup.style.transform = 'scale(1)';
            if (callback) callback();
        }, 180);
    }
}
	</script>
</body>
</html>
